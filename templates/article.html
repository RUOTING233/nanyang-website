<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>{{ work.title }} - 南洋创作</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/article.css') }}">
</head>
<body>

    <a href="javascript:history.back()" class="fixed-back-btn">← 返回</a>

    <div class="article-container">
        
        <header class="article-header">
            <h1>{{ work.title }}</h1>
            
            <div class="meta-info">
                
                {% set author_map = {
                    'yingzi': '莹姿', 
                    'fengyimei': '冯伊湄', 
                    'wangyingxia': '王映霞', 
                    'wangying': '王莹', 
                    'shenzijiu': '沈兹九'
                } %}
                <span class="meta-item author">{{ author_map[work.author] if work.author in author_map else work.author }}</span>

                <span class="meta-item">{{ work.date_display | replace(' 00:00:00', '') }}</span>

                <span class="meta-item">{{ work.genre }}</span>

                {% if work.publication and work.publication != '未知' and work.publication != '' %}
                <span class="meta-item">{{ work.publication }}</span>
                {% endif %}

            </div>
        </header>

        <div class="article-content">
            {% if work.image_path %}
                <div style="text-align: center; margin-bottom: 30px;">
                   <img src="{{ url_for('static', filename=work.image_path) }}" 
                        alt="作品配图" 
                        style="max-width: 100%; max-height: 500px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 4px;">
    </div>
{% endif %}
            
       <div class="text-content">
    {% if work.content %}
        {% for line in work.content.split('\n') %}
            
            <p>{{ line | highlight(keyword) | safe }}</p>
            
        {% endfor %}
    {% else %}
        <p>【暂无录入内容，请在数据库中添加】</p>
    {% endif %}
</div>
            
            <br><br>
            
            <div class="source-box">
                <p><strong>文献来源：</strong> {{ work.source }}</p>
            </div>

        </div>

    </div>

</body>
</html>